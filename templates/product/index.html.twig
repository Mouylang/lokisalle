{% extends 'base.html.twig' %}
{% block meta %}
  <meta name="description" content="Lokisalle - liste des salles disponibles" />
{% endblock %}

{% block title %}Liste de toutes les salles disponibles{% endblock %}

{% block body %}
<h1 class="text-center pb-5 text-info">Liste de toutes les disponibilités</h1>

{% if is_granted("ROLE_ADMIN") %}
<div class="text-center pb-5">
    <a href="{{path('product_create')}}" class="btn btn-primary">Ajouter un produit</a>
</div>
{% endif %}
<div class="row">
    {% for product in products %}   
        <div class="card mb-3 col-md-4 offset-md-1">
            <h3 class="card-header">
                <a href="{{path('product_show',{'id': product.id})}}">{{product.room.title}}</a>
            </h3>
            <div class="card-body">
                <img src="{{product.room.photo}}" class="img-fluid"/>
                <h5 class="card-title pt-3 text-center">
                {{product.room.address}} <br>
                {{product.room.zipCode}} {{product.room.city}}
                </h5>
            </div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item"><u>Catégorie </u>: {{product.room.category.name}}</li>
                <li class="list-group-item"><u>Date d'arrivée </u>: du {{product.checkinAt|date('d/m/Y H:i')}}</li>
                <li class="list-group-item"><u>Date de départ </u>: au {{product.checkoutAt|date('d/m/Y H:i')}}</li>
                <li class="list-group-item"><u>Tarif </u>: {{product.price}} €</li>
            </ul>
            <div class="card-body text-center">
                <a href="{{path('product_show',{'id': product.id})}}" class="btn btn-primary ">Afficher le détail</a>

                {% if is_granted('ROLE_ADMIN') %}
                <a href="{{path('product_edit',{'id': product.id})}}" class="btn btn-info">Modifier le produit</a>
                {% endif %}
            </div>
        </div>
    {% endfor %}    
</div>



{% endblock %}
